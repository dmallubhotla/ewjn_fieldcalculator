(* ::Package:: *)

(* :Title: sphereB *)
(* :Context: sphereB` *)
(* :Author: Deepak *)
(* :Date: 2018-10-01 *)

(* :Package Version: 0.1 *)
(* :Mathematica Version: *)
(* :Copyright: (c) 2018 Deepak *)
(* :Keywords: *)
(* :Discussion: *)

BeginPackage["sphereB`"];
(* Plots calculated B fields *)

(*dataDir = "data-20181009-130855";*)
(*readBDataFromFile[filename_] := Partition[#, 3] & /@ Import[FileNameJoin[{dataDir, filename}], "Data"];*)
(*bzAlongXAxis[data_] := Map[{#[[1]][[1]], #[[2]][[3]]} &, Select[data, (#[[1]][[2]] == 0 && #[[1]][[3]] == 0) &]];*)

(*dx005 = bzAlongXAxis[readBDataFromFile["sphereB--r3--dx0.05--range10.csv"]];*)
(*dx005Plot = ListPlot[Legended[dx005, "dx=0.05"], PlotStyle -> Purple];*)
(*dx01 = bzAlongXAxis[readBDataFromFile["sphereB--r3--dx0.1--range10.csv"]];*)
(*dx01Plot = ListPlot[Legended[dx01, "dx=0.1"], PlotStyle -> Cyan, PlotRange->{{5.5, 10}, {-1, 0}}];*)
(*dx025 = bzAlongXAxis[readBDataFromFile["sphereB--r3--dx0.25--range10.csv"]];*)
(*dx025Plot = ListPlot[Legended[dx025, "dx=0.25"], PlotStyle -> Red];*)
(*dx05 = bzAlongXAxis[readBDataFromFile["sphereB--r3--dx0.5--range10.csv"]];*)
(*dx05Plot = ListPlot[Legended[dx05, "dx=0.5"], PlotStyle -> Blue];*)
(*dx1 = bzAlongXAxis[readBDataFromFile["sphereB--r3--dx1--range10.csv"]];*)
(*dx1Plot = ListPlot[Legended[dx1, "dx=1"], PlotStyle -> Green];*)


adaptiveTableSmall = {
	{4, -1.577956967770312829861868945229354019289229459074593088816431131660033074849918521152788062322532316},
	{5, -0.8064255256476607302313698002405667323164408029529983462624617352372088170163093708644987017549204143},
	{6, -0.4643872762430524098743655936873228112079222522330578695755347293073934528255428064589017594041620388},
	{7, -0.2922216191831035877279931334524056133695839228528549623667627897024907281397299689422935168797074457},
	{8, -0.1951040815800588184001618235467128934141923976611284600409660757667074494713241028642413477019704017},
	{9, -0.1369346707773149977434428323668930319563096599857510894778717018853869258020410186431412984744426621},
	{10,-0.09996364602209332062776903958626381247673620174707628441737501546051641121502762046892043429754761008},
	{11,-0.07514475379809003140582509195509165078483741958111289789394798713320566644604407738733545947605895351}
};

adaptiveTable = {
		{3.1,
			-3.348338034555620304604513855472008092756014747686893925306056930802127352025184647487266030629212367},
		{3.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-2.347997522610275588266158262985989004155992460752673840329228070532120581035433752354189050278171569},
		{4.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-1.577956967770312829861868945229354019289229459074593088816431131660033074849918521152788062322532316},
		{4.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-1.109066768607732287684584867312011409157996988980927547800831239826037040883562819027403857912909554},
		{5.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.8064255256476607302313698002405667323164408029529983462624617352372088170163093708644987017549204143},
		{5.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.6011674113438938413741059814524786578820258130884101529971762966638580142973394347899869947792499828},
		{6.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.4643872762430524098743655936873228112079222522330578695755347293073934528255428064589017594041620388},
		{6.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.3651268063096243762916284355908483477166463400012146069077933809326186320491028073669987338631214737},
		{7.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.2922216191831035877279931334524056133695839228528549623667627897024907281397299689422935168797074457},
		{7.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.2368897254233048458505876521196864832525016329758273866718197405691545248229483778325957303019830103},
		{8.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.1951040815800588184001618235467128934141923976611284600409660757667074494713241028642413477019704017},
		{8.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.1626275607337521123206818070550852949425517688661122236401427416964982096405805311432028611099519888},
		{9.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.1369346707773149977434428323668930319563096599857510894778717018853869258020410186431412984744426621},
		{9.500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.1164913286226383174983481733861997307389225235030269578328613635075890694715522434771311531138043184},
		{10.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.09996364602209332062776903958626381247673620174707628441737501546051641121502762046892043429754761008},
		{10.50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.08636209188851337759170728722039165254800305687351526260144118936878941672780728603300471326742444724},
		{11.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
			-0.07514475379809003140582509195509165078483741958111289789394798713320566644604407738733545947605895351}
};

adaptivePlot = ListPlot[Legended[adaptiveTable, "Global Adaptive"], PlotStyle -> Orange];


dipoleCubicAlongX[x_] := -(2 * Pi  *( 3.^5) / (15))/(Abs[x^3]);



dipolePlot = Plot[dipoleCubicAlongX[x], {x, 0, 11}];
Export["BPlotsAlongX.jpg", Show[ dipolePlot, adaptivePlot], ImageResolution -> 150, ImageSize-> Automatic];
Export["BPlotsAlongXRestricted.jpg", Show[dipolePlot, adaptivePlot], ImageResolution -> 150, ImageSize-> Automatic, PlotRange->{7, 11}];

EndPackage[];
